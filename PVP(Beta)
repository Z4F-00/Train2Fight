-- Open Source

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

local settingFrame = PlayerGui:WaitForChild("SettingGui"):WaitForChild("ContentFrame"):WaitForChild("SettingFrame"):WaitForChild("SettingScrolling")
settingFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
settingFrame.ScrollBarThickness = 0

-- Tamplate
local SettingItem = settingFrame.SettingItem

-- Get Area
local Area = {
	workspace:WaitForChild("Area"):WaitForChild("PlayerArea"):WaitForChild("S2")
}

-- Status awal tombol
local isEnabled = false

-- Determine whether the area is in the safe zone
invokePVP = game:GetService("ReplicatedStorage"):WaitForChild("Area"):WaitForChild("Remote")

local function createInSettingGui()
----
local pvpSetting = SettingItem:Clone()
pvpSetting.Name = "PVPSetting"
pvpSetting.Parent = settingFrame
pvpSetting.Visible = true

-- Destroying
pvpSetting:WaitForChild("ProgressFrame"):Destroy()
pvpSetting:WaitForChild("SetItemIcon"):Destroy()
pvpSetting:WaitForChild("SettingClaimBtn"):Destroy()
pvpSetting:WaitForChild("SetItemCurNum"):Destroy()
pvpSetting:WaitForChild("SetItemMinNum"):Destroy()
pvpSetting:WaitForChild("SettingItemScript"):Destroy()

local SetItemName = pvpSetting:WaitForChild("SetItemName")
SetItemName.Text = "PVP"
SetItemName.Position = UDim2.new(0.3, 0, 0.474, 0)

-- Membuat Frame (bingkai luar) sebagai latar belakang tombol
local toggleFrame = Instance.new("Frame")
toggleFrame.Name = "ToggleFrame"
toggleFrame.Size = UDim2.new(0.15, 0, 0.553, 0)
toggleFrame.Position = UDim2.new(0.85, 0, 0.5, 0)
toggleFrame.AnchorPoint = Vector2.new(0.5, 0.5)
toggleFrame.BackgroundColor3 = Color3.new(0, 0, 0) -- Warna hitam
toggleFrame.BorderSizePixel = 0
toggleFrame.Parent = pvpSetting

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0.15, 0) -- corner 0.15
corner.Parent = toggleFrame

local stroke = Instance.new("UIStroke")
stroke.Color = Color3.new(1, 1, 1) -- warna putih
stroke.Transparency = 0.5
stroke.Thickness = 1.2
stroke.Parent = toggleFrame

-- Membuat Frame (kotak kecil) yang akan bergeser
local toggleBox = Instance.new("Frame")
toggleBox.Name = "ToggleBox"
toggleBox.Size = UDim2.new(0.49, 0, 0.8, 0)
toggleBox.Position = UDim2.new(0.05, 0, 0.1, 0) -- Posisi awal (kiri)
toggleBox.BackgroundColor3 = Color3.new(1, 1, 1) -- Warna awal (putih)
toggleBox.BorderSizePixel = 0
toggleBox.Parent = toggleFrame

local cornerToggleBox = corner:Clone()
cornerToggleBox.CornerRadius = UDim.new(0.1)
cornerToggleBox.Parent = toggleBox

-- Membuat TextButton sebagai area yang bisa diklik
local clickButton = Instance.new("TextButton")
clickButton.Name = "ClickButton"
clickButton.Size = UDim2.new(1, 0, 1, 0) -- Menutupi seluruh Frame
clickButton.BackgroundTransparency = 1
clickButton.Text = "" -- Tidak ada teks
clickButton.Parent = toggleFrame

-- Properti animasi untuk status ON dan OFF
local offProperties = {
    Position = UDim2.new(0.05, 0, 0.1, 0),
    BackgroundColor3 = Color3.new(1, 1, 1) -- Putih
}
local onProperties = {
    Position = UDim2.new(0.465, 0, 0.1, 0),
    BackgroundColor3 = Color3.new(1, 248/255, 45/255) -- Kuning
}

local offPropertiesStroke = {
    Color = Color3.new(1, 1, 1)
}
local onPropertiesStroke = {
    Color = Color3.new(1, 248/255, 45/255)
}

local tweenInfo = TweenInfo.new(1/30*5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

-- Menghubungkan fungsi ke event klik tombol
clickButton.MouseButton1Click:Connect(function()
    -- Membalikkan status boolean
    isEnabled = not isEnabled

    if isEnabled then
        -- ON
        local onTween = TweenService:Create(toggleBox, tweenInfo, onProperties)
        local onTweenStroke = TweenService:Create(stroke, tweenInfo, onPropertiesStroke)
        onTween:Play()
        onTweenStroke:Play()
        invokePVP:WaitForChild("PlayerAreaOut"):InvokeServer(unpack(Area))
    else
        -- OFF
        local offTween = TweenService:Create(toggleBox, tweenInfo, offProperties)
        local offTweenStroke = TweenService:Create(stroke, tweenInfo, offPropertiesStroke)
        offTween:Play()
        offTweenStroke:Play()
        invokePVP:WaitForChild("PlayerAreaIn"):InvokeServer(unpack(Area))
    end
end)
----
end

local getPVPSettingGui = settingFrame:FindFirstChild("PVPSetting")

if not getPVPSettingGui then
    createInSettingGui()
end
